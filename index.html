<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ü–µ–Ω</title>
    <style>
        /* –í–∞—à —Å—Ç–∏–ª—å CSS –∑–¥–µ—Å—å */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        label {
            display: block;
            font-weight: bold;
            margin-top: 10px;
        }

        textarea {
            width: 100%;
            height: 100px;
        }

        button {
            display: block;
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ü–µ–Ω</h1>
        <label for="text">–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç:</label>
        <textarea id="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å —Ü–µ–Ω–∞–º–∏"></textarea>
        <label for="percentage">–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ–Ω—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è:</label>
        <input type="number" id="percentage" placeholder="–ü—Ä–æ—Ü–µ–Ω—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è">
        <button onclick="onIncreasePercentage()">–£–≤–µ–ª–∏—á–∏—Ç—å —Ü–µ–Ω—ã</button>
        <label for="result">–†–µ–∑—É–ª—å—Ç–∞—Ç:</label>
        <textarea id="result" readonly></textarea>
    </div>

    <script>
        // JavaScript-—Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞
        function extractPrices(text) {
            const mainPattern = /(?<!\d)(\d{1,4}(?:,\d{3})*(?:\.\d{1,2})?)(?:‚ÇΩüá®üá≥)?/g;
            const fourDigitPattern = /(?<!\d)(\d{4})(?!\d)(?:\s*‚ÇΩ)?/g;
            const fiveDigitPattern = /(?<!\d)(\d{5})(?!\d)(?:\s*‚ÇΩ)?/g;
            const sixDigitPattern = /(?<!\d)(\d{6})(?!\d)(?:\s*‚ÇΩ)?/g;
            const allPrices = [];

            let matches = text.match(mainPattern);
            if (matches) {
                matches.forEach(match => {
                    if (!match.includes('(')) {
                        const formattedPrice = parseFloat(match.replace(/,|\s|‚ÇΩ/g, ''));
                        allPrices.push(formattedPrice.toFixed(2) + '‚ÇΩ');
                    }
                });
            }

            matches = text.match(fourDigitPattern);
            if (matches) {
                allPrices.push(...matches);
            }

            matches = text.match(fiveDigitPattern);
            if (matches) {
                allPrices.push(...matches);
            }

            matches = text.match(sixDigitPattern);
            if (matches) {
                allPrices.push(...matches);
            }

            return allPrices;
        }

        function increasePrices(prices, percentage) {
            const increasedPrices = [];
            for (const price of prices) {
                const originalPrice = parseFloat(price.replace(/‚ÇΩ|,/g, ''));
                const increasedPrice = Math.ceil(originalPrice * (1 + percentage / 100) / 100) * 100;
                increasedPrices.push(increasedPrice.toLocaleString() + '‚ÇΩ');
            }
            return increasedPrices;
        }

        function onIncreasePercentage() {
            const inputText = document.getElementById('text').value;
            const percentage = parseFloat(document.getElementById('percentage').value);
            const resultPrices = extractPrices(inputText);
            const increasedPrices = increasePrices(resultPrices, percentage);
            const resultTextArea = document.getElementById('result');
            let formattedText = inputText;
            increasedPrices.forEach((price, index) => {
                formattedText = formattedText.replace(resultPrices[index], price);
            });
            resultTextArea.value = formattedText;
        }
    </script>
</body>
</html>
